<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>PMO</title>
<link href="../res/fluid.css" rel="stylesheet" type="text/css" />
<link href="../res/widgets.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
-->
</style>
<script language="JavaScript" type="text/javascript" src="../res/generics.R1.js"></script>
<script language="JavaScript" type="text/javascript" src="../res/constants.js"></script>
<script language="JavaScript" type="text/javascript" src="../res/eap.R1.js"></script>
<script language="JavaScript" type="text/javascript" src="../res/fs-config.js"></script>
<script language="JavaScript" type="text/javascript" src="../res/fluid.js"></script>
<script language="JavaScript" type="text/javascript" src="../res/pmo.js"></script>
<script>
function loadPage() {
	Fluid.init();
	// TODO remove this line
	Fluid.columns.push({});
	// Form 1:
	var f = Fluid.addForm({width:280, title: "Innovair"});
	f.addDropDown({name:"org-ddown", text:"Programmes"});
	f.addLabel({text: "innovair.co", href:"http://innovair.co"});
	f.addLabel({text: "54 employees"});
	f.addLabel({text: "At Innovair, ideas, technology, experience and best practices come together to create ground-breaking, innovative products for the enterprise market."});
	f.addLabel({text: "At Innovair, ideas, technology, experience and best practices come together to create ground-breaking, innovative products for the enterprise market."});
	f.addLabel({text: "At Innovair, ideas, technology, experience and best practices come together to create ground-breaking, innovative products for the enterprise market."});
	f.addButton({name:"b-org-edit", type:"edit", side:"right"});
	f.addButton({name:"b-org-h", type:"history"});
	f.addButton({name:"b-org-leave", type:"leave", side:"left"});
	// Form 2:
	var data = new Array();
	data.push({name: "Web Billing Platform", people: 5, startDate: "12 August", endDate: "18 October"});
	data.push({name: "Back Office API", people: 0, startDate: "5 October 2012", endDate: "25 November 2013"});
	data.push({name: "E-Commerce Business Case", people: 2, startDate: "4 April", endDate: "12 June"});
	f = Fluid.addList({width:430, title: "Projects", data: data, display: function(node, item) {
		var table = DOM.addNode(node, "table");
		table.className = "fluid-grid";
		// Name
		var tr1 = DOM.addNode(table, "tr");
		var td1 = DOM.addNode(tr1, "td");
		td1.className = "form-c";
		td1.style.fontSize = "14px";
		td1.innerHTML = "<strong>"+item.name+"</strong>";
		// People:
		var tr2 = DOM.addNode(table, "tr");
		var td2 = DOM.addNode(tr2, "td");
		td2.className = "form-c";
		if(item.people) {
			td2.innerHTML = item.people + " people";
		}
		else {
			// TODO get company name via item.parent.name
			td2.innerHTML = "open to all employees";
		}
		// Dates:
		var tr3 = DOM.addNode(table, "tr");
		var td3 = DOM.addNode(tr3, "td");
		td3.className = "form-c";
		td3.innerHTML = item.startDate + " to " + item.endDate;
	}});
	//f.gridNode.innerHTML = Strings.multiply("Main</p>", 30);


	Fluid.pack();
	
	// Ajax:
	var request = new AjaxRequest2({
		url: "../tmp/organisations.json",
		method: "get",
		async: true,
		//parameters: Array({name:"action", value:"change-password"}, DOM.id("old_password"), DOM.id("password1")),
		onSuccess: function(data) {
			for(var i=0; i<data.length; i++) {
				//console.log(data[i]);
			}
		},
		onFailure: null
	});
	request.send();
}

</script>
</head>

<body class="fnt-normal" onload="loadPage()">
<table id="fluid-container">
	<tr>
		<td>
		<table id="header">
			<tr>
				<td id="header-left">
					<table>
						<tr>
							<td class="header-c-logo"><img src="../img/logo.png"/></td>
							<td class="header-c-icon pointer"><img src="../img/icon-settings.png"/></td>
							<td class="header-c-icon pointer"><img src="../img/icon-search.png"/></td>
							<td class="header-c-icon pointer"><img src="../img/icon-help.png"/></td>
						</tr>
					</table>
				</td>
				<td id="header-right">
					<table align="right">
						<tr>
							<td class="header-c-text pointer">Carlo Abruzzo</td>
							<td class="header-c-separator"><img src="../img/separator.png"/></td>
							<td class="header-c-text pointer">Sign Out</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		</td>
	</tr>
	<tr id="fluid-container-tr">
		<td>
			<div id="fluid-container-div">
			<table id="fluid-container-table">
				<!-- First column: -->
				<tr id="fluid-grid">
					<td class="fluid-grid-col">
						<div class="fluid-form" style="width:250px">
							<table class="form-grid">
								<tr>
									<td class="form-c">
										<div class="wg-highlight">HOME</div>
										<div class="wg-highlight">PERSONAL</div>
									</td>
								</tr>
							</table>
						</div>
						<div class="fluid-form" style="width:250px; border-bottom:none">
							<table class="form-grid">
								<tr>
									<td class="form-c-title" style="text-align: center">
									Organisations
									</td>
								</tr>
								<tr>
									<td class="form-c">
										<div class="wg-highlight" onclick="PMO.displayOrg(1)">FT Consulting</div>
										<div class="wg-highlight" onclick="PMO.displayOrg(2)">Innovair</div>
										<div class="wg-highlight" onclick="PMO.displayOrg(3)">RedFly</div>
									</td>
								</tr>
							</table>
						</div>
					</td>
					<!-- This is where Fluid columns are added -->
				</tr>
			</table>
			</div>
		</td>
	</tr>
    <tr>
        <td id="footer"></td>
    </tr>
</table>
</body>
</html>
